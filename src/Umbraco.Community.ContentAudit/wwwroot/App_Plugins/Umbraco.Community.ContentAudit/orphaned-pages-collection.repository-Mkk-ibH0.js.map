{"version":3,"file":"orphaned-pages-collection.repository-Mkk-ibH0.js","sources":["../../../../Umbraco.Community.ContentAudit.UI/src/section/orphaned-pages/collection/repository/orphaned-pages-collection.server.data-source.ts","../../../../Umbraco.Community.ContentAudit.UI/src/section/orphaned-pages/collection/repository/orphaned-pages-collection.repository.ts"],"sourcesContent":["import { UmbCollectionDataSource, UmbCollectionFilterModel } from \"@umbraco-cms/backoffice/collection\";\r\nimport { UmbControllerHost } from \"@umbraco-cms/backoffice/controller-api\";\r\nimport { AuditService, PageDto } from \"../../../../api\";\r\nimport { tryExecuteAndNotify } from \"@umbraco-cms/backoffice/resources\";\r\n\r\nexport class ContentAuditOrphanedPagesCollectionDataSource implements UmbCollectionDataSource<PageDto> {\r\n\t#host: UmbControllerHost;\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tthis.#host = host;\r\n\t}\r\n\r\n\tasync getCollection(filter: UmbCollectionFilterModel) {\r\n\t\tconst { data, error } = await tryExecuteAndNotify(this.#host, AuditService.getOrphanedPages(filter));\r\n\r\n\t\tif (error) {\r\n\t\t\treturn { error };\r\n\t\t}\r\n\r\n\t\tif (!data) {\r\n\t\t\treturn { data: { items: [], total: 0 } };\r\n\t\t}\r\n\r\n\t\tconst { items, total } = data;\r\n\r\n\t\treturn { data: { items: items, total } };\r\n\t}\r\n}","import { UmbRepositoryBase } from '@umbraco-cms/backoffice/repository';\r\nimport type { UmbCollectionFilterModel, UmbCollectionRepository } from '@umbraco-cms/backoffice/collection';\r\nimport { ContentAuditOrphanedPagesCollectionDataSource } from \"./orphaned-pages-collection.server.data-source\";\r\nimport { UmbControllerHost } from '@umbraco-cms/backoffice/controller-api';\r\nimport { PageDto } from '../../../../api';\r\n\r\nexport class ContentAuditOrphanedPagesCollectionRepository extends UmbRepositoryBase implements UmbCollectionRepository<PageDto, UmbCollectionFilterModel> {\r\n    #collectionSource: ContentAuditOrphanedPagesCollectionDataSource;\r\n\r\n    constructor(host: UmbControllerHost) {\r\n        super(host);\r\n        this.#collectionSource = new ContentAuditOrphanedPagesCollectionDataSource(host);\r\n    }\r\n\r\n    async requestCollection(filter: UmbCollectionFilterModel) {\r\n        return this.#collectionSource.getCollection(filter);\r\n    }\r\n}\r\n\r\nexport default ContentAuditOrphanedPagesCollectionRepository;"],"names":["ContentAuditOrphanedPagesCollectionDataSource","host","__privateAdd","_host","__privateSet","filter","data","error","tryExecuteAndNotify","__privateGet","AuditService","items","total","ContentAuditOrphanedPagesCollectionRepository","UmbRepositoryBase","_collectionSource"],"mappings":";;;;;;;;;AAKO,MAAMA,EAA0F;AAAA,EAGtG,YAAYC,GAAyB;AAFrC,IAAAC,EAAA,MAAAC;AAGC,IAAAC,EAAA,MAAKD,GAAQF;AAAA,EAAA;AAAA,EAGd,MAAM,cAAcI,GAAkC;AAC/C,UAAA,EAAE,MAAAC,GAAM,OAAAC,EAAU,IAAA,MAAMC,EAAoBC,EAAA,MAAKN,IAAOO,EAAa,iBAAiBL,CAAM,CAAC;AAEnG,QAAIE;AACH,aAAO,EAAE,OAAAA,EAAM;AAGhB,QAAI,CAACD;AACG,aAAA,EAAE,MAAM,EAAE,OAAO,CAAA,GAAI,OAAO,IAAI;AAGlC,UAAA,EAAE,OAAAK,GAAO,OAAAC,EAAA,IAAUN;AAEzB,WAAO,EAAE,MAAM,EAAE,OAAAK,GAAc,OAAAC,IAAQ;AAAA,EAAA;AAEzC;AArBCT,IAAA;;ACAM,MAAMU,UAAsDC,EAAwF;AAAA,EAGvJ,YAAYb,GAAyB;AACjC,UAAMA,CAAI;AAHd,IAAAC,EAAA,MAAAa;AAIS,IAAAX,EAAA,MAAAW,GAAoB,IAAIf,EAA8CC,CAAI;AAAA,EAAA;AAAA,EAGnF,MAAM,kBAAkBI,GAAkC;AAC/C,WAAAI,EAAA,MAAKM,GAAkB,cAAcV,CAAM;AAAA,EAAA;AAE1D;AAVIU,IAAA;"}