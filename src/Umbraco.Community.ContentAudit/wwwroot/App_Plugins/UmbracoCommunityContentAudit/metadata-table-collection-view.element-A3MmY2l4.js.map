{"version":3,"file":"metadata-table-collection-view.element-A3MmY2l4.js","sources":["../../../../Umbraco.Community.ContentAudit.UI/src/section/metadata/collection/views/table/metadata-table-collection-view.element.ts"],"sourcesContent":["import { UMB_COLLECTION_CONTEXT, UmbDefaultCollectionContext } from '@umbraco-cms/backoffice/collection';\r\nimport { css, customElement, html, state } from '@umbraco-cms/backoffice/external/lit';\r\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\r\nimport { InternalPageDto } from '../../../../../api';\r\nimport { UmbTableColumn, UmbTableItem, UmbTableConfig } from '../../../../../exports';\r\n\r\n@customElement('content-audit-metadata-table-collection-view')\r\nexport class ContentAuditMetdataTableCollectionViewElement extends UmbLitElement {\r\n\r\n    @state()\r\n    private _tableConfig: UmbTableConfig = {\r\n        allowSelection: false,\r\n        hideIcon: true\r\n    };\r\n\r\n    @state()\r\n    private _tableColumns: Array<UmbTableColumn> = [\r\n        {\r\n            name: 'URL',\r\n            alias: 'url',\r\n        },\r\n        {\r\n            name: 'Title',\r\n            alias: 'metaTitle'\r\n        },\r\n        {\r\n            name: 'Description',\r\n            alias: 'metaDescription'\r\n        },\r\n        {\r\n            name: 'Keywords',\r\n            alias: 'metaKeywords'\r\n        },\r\n        {\r\n            name: 'Robots',\r\n            alias: 'metaRobots'\r\n        }\r\n    ];\r\n\r\n    @state()\r\n    private _tableItems: Array<UmbTableItem> = [];\r\n\r\n    #collectionContext?: UmbDefaultCollectionContext<InternalPageDto>;\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.consumeContext(UMB_COLLECTION_CONTEXT, (instance) => {\r\n            this.#collectionContext = instance;\r\n            this.#observeCollectionItems();\r\n        });\r\n    }\r\n\r\n    #observeCollectionItems() {\r\n        if (!this.#collectionContext) return;\r\n        this.observe(this.#collectionContext.items, (items) => this.#createTableItems(items), 'umbCollectionItemsObserver');\r\n    }\r\n\r\n    #createTableItems(pages: InternalPageDto[]) {\r\n        this._tableItems = pages.map((page) => {\r\n            return {\r\n                id: page.unique,\r\n                entityType: page.entityType,\r\n                icon: 'icon-alert',\r\n                data: [\r\n                    {\r\n                        columnAlias: 'url',\r\n                        value: html`<a href=\"section/content/workspace/document/edit/${page.unique}\">${page.url}</a>`\r\n                    },\r\n                    {\r\n                        columnAlias: 'metaTitle',\r\n                        value: page.metaTitle\r\n                    },\r\n                    {\r\n                        columnAlias: 'metaDescription',\r\n                        value: page.metaDescription\r\n                    },\r\n                    {\r\n                        columnAlias: 'metaKeywords',\r\n                        value: page.metaKeywords\r\n                    },\r\n                    {\r\n                        columnAlias: 'metaRobots',\r\n                        value: page.metaRobots\r\n                    }\r\n                ]\r\n            }\r\n        });\r\n    }\r\n\r\n    override render() {\r\n        if (this._tableItems.length !== 0) {\r\n            return html`\r\n\t\t\t    <umb-table\r\n                    .config=${this._tableConfig}\r\n                    .columns=${this._tableColumns}\r\n                    .items=${this._tableItems}\r\n                ></umb-table>\r\n\t\t    `;\r\n        }\r\n    }\r\n\r\n    static override styles = [\r\n        css`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tflex-direction: column;\r\n\t\t\t}\r\n\t\t`,\r\n    ];\r\n}\r\n\r\nexport default ContentAuditMetdataTableCollectionViewElement;\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        'content-audit-metadata-table-collection-view': ContentAuditMetdataTableCollectionViewElement;\r\n    }\r\n}\r\n"],"names":["_collectionContext","_ContentAuditMetdataTableCollectionViewElement_instances","observeCollectionItems_fn","createTableItems_fn","ContentAuditMetdataTableCollectionViewElement","UmbLitElement","__privateAdd","UMB_COLLECTION_CONTEXT","instance","__privateSet","__privateMethod","html","__privateGet","items","pages","page","css","__decorateClass","state","customElement","ContentAuditMetdataTableCollectionViewElement$1"],"mappings":";;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC;AAOa,IAAAC,IAAN,cAA4DC,EAAc;AAAA,EAqC7E,cAAc;AACJ,UAAA,GAtCPC,EAAA,MAAAL,CAAA,GAGH,KAAQ,eAA+B;AAAA,MACnC,gBAAgB;AAAA,MAChB,UAAU;AAAA,IACd,GAGA,KAAQ,gBAAuC;AAAA,MAC3C;AAAA,QACI,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,OAAO;AAAA,MACX;AAAA,MACA;AAAA,QACI,MAAM;AAAA,QACN,OAAO;AAAA,MAAA;AAAA,IAEf,GAGA,KAAQ,cAAmC,CAAC,GAE5CK,EAAA,MAAAN,CAAA,GAKS,KAAA,eAAeO,GAAwB,CAACC,MAAa;AACtD,MAAAC,EAAA,MAAKT,GAAqBQ,CAAA,GAC1BE,EAAA,MAAKT,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,IAAA,CACH;AAAA,EAAA;AAAA,EAwCI,SAAS;AACV,QAAA,KAAK,YAAY,WAAW;AACrB,aAAAS;AAAA;AAAA,8BAEW,KAAK,YAAY;AAAA,+BAChB,KAAK,aAAa;AAAA,6BACpB,KAAK,WAAW;AAAA;AAAA;AAAA,EAGrC;AAWR;AApEIX,IAAA,oBAAA,QAAA;AAnCGC,IAAA,oBAAA,QAAA;AA8CHC,IAAuB,WAAG;AAClB,EAACU,QAAKZ,CAAoB,KACzB,KAAA,QAAQY,EAAK,MAAAZ,CAAA,EAAmB,OAAO,CAACa,MAAUH,EAAK,MAAAT,GAAAE,CAAA,EAAL,KAAuB,MAAAU,CAAA,GAAQ,4BAA4B;AACtH;AAEAV,IAAiB,SAACW,GAA0B;AACxC,OAAK,cAAcA,EAAM,IAAI,CAACC,OACnB;AAAA,IACH,IAAIA,EAAK;AAAA,IACT,YAAYA,EAAK;AAAA,IACjB,MAAM;AAAA,IACN,MAAM;AAAA,MACF;AAAA,QACI,aAAa;AAAA,QACb,OAAOJ,qDAAwDI,EAAK,MAAM,KAAKA,EAAK,GAAG;AAAA,MAC3F;AAAA,MACA;AAAA,QACI,aAAa;AAAA,QACb,OAAOA,EAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACI,aAAa;AAAA,QACb,OAAOA,EAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACI,aAAa;AAAA,QACb,OAAOA,EAAK;AAAA,MAChB;AAAA,MACA;AAAA,QACI,aAAa;AAAA,QACb,OAAOA,EAAK;AAAA,MAAA;AAAA,IAChB;AAAA,EAER,EACH;AACL;AAjFSX,EA+FO,SAAS;AAAA,EACrBY;AAAA;AAAA;AAAA;AAAA;AAAA;AAMJ;AAnGQC,EAAA;AAAA,EADPC,EAAM;AAAA,GAFEd,EAGD,WAAA,gBAAA,CAAA;AAMAa,EAAA;AAAA,EADPC,EAAM;AAAA,GAREd,EASD,WAAA,iBAAA,CAAA;AAwBAa,EAAA;AAAA,EADPC,EAAM;AAAA,GAhCEd,EAiCD,WAAA,eAAA,CAAA;AAjCCA,IAANa,EAAA;AAAA,EADNE,EAAc,8CAA8C;AAAA,GAChDf,CAAA;AAyGb,MAAAgB,IAAehB;"}