{"version":3,"file":"issues-workspace.context-AO3u7spi.js","sources":["../../../../Umbraco.Community.ContentAudit.UI/src/section/issues/workspace/issues/issues-workspace-editor.element.ts","../../../../Umbraco.Community.ContentAudit.UI/src/section/issues/workspace/issues/issues-workspace.context.ts"],"sourcesContent":["import { customElement, html, state } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\nimport { CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT } from \"./issues-workspace.context\";\r\nimport { UMB_WORKSPACE_PATH_PATTERN } from \"@umbraco-cms/backoffice/workspace\";\r\nimport { IssueDto } from \"../../../../api\";\r\n\r\n@customElement('content-audit-issues-workspace-editor')\r\nexport class ContentAuditIssuesWorkspaceEditorElement extends UmbLitElement {\r\n\t#workspaceContext?: typeof CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\t@state()\r\n\t_data?: IssueDto;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\r\n\t\t\tthis.observe(this.#workspaceContext.data, (data) => {\r\n\t\t\t\tthis._data = data;\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n\t\t\t<umb-workspace-editor back-path=\"${CONTENT_AUDIT_ISSUES_ROOT_WORKSPACE_PATH}\">\r\n\t\t\t</umb-workspace-editor>\r\n\t\t`;\r\n\t}\r\n}\r\n\r\nexport default ContentAuditIssuesWorkspaceEditorElement;\r\n\r\nexport const CONTENT_AUDIT_ISSUES_ROOT_WORKSPACE_PATH = UMB_WORKSPACE_PATH_PATTERN.generateAbsolute({\r\n\tsectionName: 'audit',\r\n\tentityType: 'issues-root',\r\n});\r\n\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'content-audit-issues-workspace-editor': ContentAuditIssuesWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import { UmbContextBase } from \"@umbraco-cms/backoffice/class-api\";\r\nimport { UmbContextToken } from \"@umbraco-cms/backoffice/context-api\";\r\nimport { UmbControllerHost } from \"@umbraco-cms/backoffice/controller-api\";\r\nimport { UmbWorkspaceRouteManager } from \"@umbraco-cms/backoffice/workspace\";\r\nimport ContentAuditIssuesWorkspaceEditorElement from \"./issues-workspace-editor.element\";\r\nimport ContentAuditIssuesDetailRepository from \"../../repository/detail/issues-detail.repository\";\r\nimport { UmbObjectState } from \"@umbraco-cms/backoffice/observable-api\";\r\nimport { IssueDto } from \"../../../../api\";\r\nimport { CONTENT_AUDIT_ISSUES_WORKSPACE_ALIAS } from \"../constants\";\r\n\r\nexport class ContentAuditIssuesWorkspaceContext\r\n\textends UmbContextBase<ContentAuditIssuesWorkspaceContext> {\r\n\r\n\tpublic readonly workspaceAlias = CONTENT_AUDIT_ISSUES_WORKSPACE_ALIAS;\r\n\tpublic readonly repository = new ContentAuditIssuesDetailRepository(this);\r\n\r\n\t#data = new UmbObjectState<IssueDto | undefined>(undefined);\r\n\treadonly data = this.#data.asObservable();\r\n\r\n\treadonly unique = this.#data.asObservablePart((data) => data?.unique);\r\n\r\n\treadonly routes = new UmbWorkspaceRouteManager(this);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT);\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: ContentAuditIssuesWorkspaceEditorElement,\r\n\t\t\t\tsetup: (_component, info) => {\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tasync load(unique: string) {\r\n\t\tconst { data } = await this.repository.requestByUnique(unique);\r\n\r\n\t\tif (data) {\r\n\t\t\tthis.#data.setValue(data);\r\n\t\t}\r\n\t}\r\n\r\n\tgetData() {\r\n\t\treturn this.#data.getValue();\r\n\t}\r\n\r\n\tgetUnique() {\r\n\t\treturn this.getData()?.unique;\r\n\t}\r\n\r\n\tgetEntityType() {\r\n\t\treturn 'issues';\r\n\t}\r\n\r\n\tpublic override destroy(): void {\r\n\t\tthis.#data.destroy();\r\n\t\tsuper.destroy();\r\n\t}\r\n}\r\n\r\nexport { ContentAuditIssuesWorkspaceContext as api };\r\n\r\nexport const CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT = new UmbContextToken<any, ContentAuditIssuesWorkspaceContext>(\r\n\t'UmbWorkspaceContext',\r\n\tundefined,\r\n\t(context): context is ContentAuditIssuesWorkspaceContext => context.getEntityType?.() === 'issues',\r\n);\r\n"],"names":["_workspaceContext","ContentAuditIssuesWorkspaceEditorElement","UmbLitElement","__privateAdd","CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT","instance","__privateSet","__privateGet","data","html","CONTENT_AUDIT_ISSUES_ROOT_WORKSPACE_PATH","__decorateClass","state","customElement","ContentAuditIssuesWorkspaceEditorElement$1","UMB_WORKSPACE_PATH_PATTERN","ContentAuditIssuesWorkspaceContext","UmbContextBase","host","_data","CONTENT_AUDIT_ISSUES_WORKSPACE_ALIAS","ContentAuditIssuesDetailRepository","UmbObjectState","UmbWorkspaceRouteManager","_component","info","unique","_a","UmbContextToken","context"],"mappings":";;;;;;;;;;;;;;;;;;;gVAAAA;AAOa,IAAAC,IAAN,cAAuDC,EAAc;AAAA,EAM3E,cAAc;AACP,UAAA,GANPC,EAAA,MAAAH,CAAA,GAQM,KAAA,eAAeI,GAAwC,CAACC,MAAa;AACzE,MAAAC,EAAA,MAAKN,GAAoBK,CAAA,GAEzB,KAAK,QAAQE,EAAA,MAAKP,CAAkB,EAAA,MAAM,CAACQ,MAAS;AACnD,aAAK,QAAQA;AAAA,MAAA,CACb;AAAA,IAAA,CACD;AAAA,EAAA;AAAA,EAIO,SAAS;AACV,WAAAC;AAAA,sCAC6BC,CAAwC;AAAA;AAAA;AAAA,EAAA;AAI9E;AAxBCV,IAAA,oBAAA,QAAA;AAGAW,EAAA;AAAA,EADCC,EAAM;AAAA,GAHKX,EAIZ,WAAA,SAAA,CAAA;AAJYA,IAANU,EAAA;AAAA,EADNE,EAAc,uCAAuC;AAAA,GACzCZ,CAAA;AA2Bb,MAAAa,IAAeb,GAEFS,IAA2CK,EAA2B,iBAAiB;AAAA,EACnG,aAAa;AAAA,EACb,YAAY;AACb,CAAC;;AC7BM,MAAMC,UACJC,EAAmD;AAAA,EAY3D,YAAYC,GAAyB;AACpC,UAAMA,GAAMd,CAAsC;AARnD,IAAAD,EAAA,MAAAgB;AAHA,SAAgB,iBAAiBC,GACjB,KAAA,aAAa,IAAIC,EAAmC,IAAI,GAEhEf,EAAA,MAAAa,GAAA,IAAIG,EAAqC,MAAS,IACjD,KAAA,OAAOf,EAAA,MAAKY,GAAM,aAAa,GAExC,KAAS,SAASZ,EAAA,MAAKY,GAAM,iBAAiB,CAACX,MAASA,KAAA,gBAAAA,EAAM,MAAM,GAE3D,KAAA,SAAS,IAAIe,EAAyB,IAAI,GAKlD,KAAK,OAAO,UAAU;AAAA,MACrB;AAAA,QACC,MAAM;AAAA,QACN,WAAWtB;AAAAA,QACX,OAAO,CAACuB,GAAYC,MAAS;AACtB,gBAAAC,IAASD,EAAK,MAAM,OAAO;AACjC,eAAK,KAAKC,CAAM;AAAA,QAAA;AAAA,MACjB;AAAA,IACD,CACA;AAAA,EAAA;AAAA,EAGF,MAAM,KAAKA,GAAgB;AAC1B,UAAM,EAAE,MAAAlB,EAAK,IAAI,MAAM,KAAK,WAAW,gBAAgBkB,CAAM;AAE7D,IAAIlB,KACED,EAAA,MAAAY,GAAM,SAASX,CAAI;AAAA,EACzB;AAAA,EAGD,UAAU;AACF,WAAAD,EAAA,MAAKY,GAAM,SAAS;AAAA,EAAA;AAAA,EAG5B,YAAY;;AACJ,YAAAQ,IAAA,KAAK,cAAL,gBAAAA,EAAgB;AAAA,EAAA;AAAA,EAGxB,gBAAgB;AACR,WAAA;AAAA,EAAA;AAAA,EAGQ,UAAgB;AAC/B,IAAApB,EAAA,MAAKY,GAAM,QAAQ,GACnB,MAAM,QAAQ;AAAA,EAAA;AAEhB;AA9CCA,IAAA;AAkDM,MAAMf,IAAyC,IAAIwB;AAAA,EACzD;AAAA,EACA;AAAA,EACA,CAACC,MAAA;;AAA2D,aAAAF,IAAAE,EAAQ,kBAAR,gBAAAF,EAAA,KAAAE,QAA8B;AAAA;AAC3F;"}