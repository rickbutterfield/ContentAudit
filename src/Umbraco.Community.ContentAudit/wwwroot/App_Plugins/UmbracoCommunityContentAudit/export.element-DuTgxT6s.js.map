{"version":3,"file":"export.element-DuTgxT6s.js","sources":["../../../../Umbraco.Community.ContentAudit.UI/src/section/export/workspace/views/export.element.ts"],"sourcesContent":["import { UmbElementMixin } from \"@umbraco-cms/backoffice/element-api\";\r\nimport { css, customElement, html, LitElement } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { tryExecuteAndNotify } from \"@umbraco-cms/backoffice/resources\";\r\nimport { AuditService } from \"../../../../api\";\r\n\r\n@customElement('content-audit-export')\r\nexport class ContentAuditExportElement extends UmbElementMixin(LitElement) {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    async #exportCsv() {\r\n        const { data, error } = await tryExecuteAndNotify(this, AuditService.getExportData());\r\n\r\n        if (data) {\r\n            const blob = new Blob([data], { type: 'text/csv;charset=utf-8;' });\r\n            const url = URL.createObjectURL(blob);\r\n            const a = document.createElement('a');\r\n            a.href = url;\r\n            a.download = 'content-audit-export.csv';\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            document.body.removeChild(a);\r\n            URL.revokeObjectURL(url);\r\n        }\r\n\r\n        if (error) {\r\n            console.error(error);\r\n        }\r\n    }\r\n\r\n    override render() {\r\n        return html`\r\n\t\t    <umb-workspace-editor headline=\"Export\" .enforceNoFooter=${true}>\r\n                <div id=\"main\">\r\n                    <uui-box headline=\"CSV export\">\r\n                        <p>Export your latest audit run to a CSV file.</p>\r\n                        <uui-button look=\"primary\" label=\"Export CSV\" @click=${() => this.#exportCsv()}></uui-button>\r\n                    </uui-box>\r\n                </div>\r\n\t\t    </umb-workspace-editor>\r\n\t    `;\r\n    }\r\n\r\n    static override styles = [\r\n        css`\r\n            :host {\r\n                display: block;\r\n            }\r\n\r\n            #main {\r\n                padding: var(--uui-size-space-5);\r\n            }\r\n        `\r\n    ]\r\n}\r\n\r\nexport default ContentAuditExportElement;\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        'content-audit-export-root': ContentAuditExportElement;\r\n    }\r\n}"],"names":["_ContentAuditExportElement_instances","exportCsv_fn","ContentAuditExportElement","UmbElementMixin","LitElement","__privateAdd","html","__privateMethod","data","error","tryExecuteAndNotify","AuditService","blob","url","a","css","__decorateClass","customElement","ContentAuditExportElement$1"],"mappings":";;;;;;;;;;8OAAAA,GAAAC;AAMO,IAAMC,IAAN,cAAwCC,EAAgBC,CAAU,EAAE;AAAA,EACvE,cAAc;AACJ,UAAA,GAFPC,EAAA,MAAAL,CAAA;AAAA,EAAA;AAAA,EAyBM,SAAS;AACP,WAAAM;AAAA,iEACkD,EAAI;AAAA;AAAA;AAAA;AAAA,+EAIU,MAAMC,EAAK,MAAAP,GAAAC,CAAA,EAAL,KAAiB,IAAA,CAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAAA;AAkBtG;AAjDOD,IAAA,oBAAA,QAAA;AAKGC,IAAU,iBAAG;AACT,QAAA,EAAE,MAAAO,GAAM,OAAAC,MAAU,MAAMC,EAAoB,MAAMC,EAAa,eAAe;AAEpF,MAAIH,GAAM;AACA,UAAAI,IAAO,IAAI,KAAK,CAACJ,CAAI,GAAG,EAAE,MAAM,2BAA2B,GAC3DK,IAAM,IAAI,gBAAgBD,CAAI,GAC9BE,IAAI,SAAS,cAAc,GAAG;AACpC,IAAAA,EAAE,OAAOD,GACTC,EAAE,WAAW,4BACJ,SAAA,KAAK,YAAYA,CAAC,GAC3BA,EAAE,MAAM,GACC,SAAA,KAAK,YAAYA,CAAC,GAC3B,IAAI,gBAAgBD,CAAG;AAAA,EAAA;AAG3B,EAAIJ,KACA,QAAQ,MAAMA,CAAK;AAE3B;AAvBSP,EAsCO,SAAS;AAAA,EACrBa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASJ;AAhDSb,IAANc,EAAA;AAAA,EADNC,EAAc,sBAAsB;AAAA,GACxBf,CAAA;AAmDb,MAAAgB,IAAehB;"}