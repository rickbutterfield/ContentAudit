{"version":3,"file":"issues-workspace.context-zTIl5qDh.js","sources":["../../../../Umbraco.Community.ContentAudit.UI/src/section/issues/workspace/issues/issues-workspace-editor.element.ts","../../../../Umbraco.Community.ContentAudit.UI/src/section/issues/workspace/issues/issues-workspace.context.ts"],"sourcesContent":["import { customElement, html, state } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\nimport { CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT } from \"./issues-workspace.context\";\r\nimport { UMB_WORKSPACE_PATH_PATTERN } from \"@umbraco-cms/backoffice/workspace\";\r\nimport { IssueDto } from \"../../../../api\";\r\n\r\n@customElement('content-audit-issues-workspace-editor')\r\nexport class ContentAuditIssuesWorkspaceEditorElement extends UmbLitElement {\r\n\t#workspaceContext?: typeof CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\t@state()\r\n\t_data?: IssueDto;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\r\n\t\t\tthis.observe(this.#workspaceContext?.data, (data) => {\r\n\t\t\t\tthis._data = data;\r\n\t\t\t})\r\n\t\t});\r\n\t}\r\n\r\n\r\n\toverride render() {\r\n\t\tif (this._data) {\r\n\t\t\treturn html`\r\n\t\t\t\t<umb-workspace-editor back-path=\"${CONTENT_AUDIT_ISSUES_ROOT_WORKSPACE_PATH}\" .enforceNoFooter=\"${true}\">\r\n\t\t\t\t\t<div slot=\"header\">\r\n\t\t\t\t\t\t<h3 id=\"headline\">${this._data.name}</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</umb-workspace-editor>\r\n\t\t\t`;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default ContentAuditIssuesWorkspaceEditorElement;\r\n\r\nexport const CONTENT_AUDIT_ISSUES_ROOT_WORKSPACE_PATH = UMB_WORKSPACE_PATH_PATTERN.generateAbsolute({\r\n\tsectionName: 'audit',\r\n\tentityType: 'issues-root',\r\n});\r\n\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'content-audit-issues-workspace-editor': ContentAuditIssuesWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import { UmbContextBase } from \"@umbraco-cms/backoffice/class-api\";\r\nimport { UmbContextToken } from \"@umbraco-cms/backoffice/context-api\";\r\nimport { UmbControllerHost } from \"@umbraco-cms/backoffice/controller-api\";\r\nimport { UmbWorkspaceRouteManager } from \"@umbraco-cms/backoffice/workspace\";\r\nimport ContentAuditIssuesWorkspaceEditorElement from \"./issues-workspace-editor.element\";\r\nimport ContentAuditIssuesDetailRepository from \"../../repository/detail/issues-detail.repository\";\r\nimport { UmbObjectState } from \"@umbraco-cms/backoffice/observable-api\";\r\nimport { IssueDto } from \"../../../../api\";\r\nimport { CONTENT_AUDIT_ISSUES_WORKSPACE_ALIAS } from \"../constants\";\r\n\r\nexport class ContentAuditIssuesWorkspaceContext extends UmbContextBase {\r\n\r\n\tpublic readonly workspaceAlias = CONTENT_AUDIT_ISSUES_WORKSPACE_ALIAS;\r\n\tpublic readonly repository = new ContentAuditIssuesDetailRepository(this);\r\n\r\n\t#data = new UmbObjectState<IssueDto | undefined>(undefined);\r\n\treadonly data = this.#data.asObservable();\r\n\r\n\treadonly unique = this.#data.asObservablePart((data) => data?.unique);\r\n\r\n\treadonly routes = new UmbWorkspaceRouteManager(this);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT);\r\n\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: ContentAuditIssuesWorkspaceEditorElement,\r\n\t\t\t\tsetup: (_component, info) => {\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tasync load(unique: string) {\r\n\t\tconst { data } = await this.repository.requestByUnique(unique);\r\n\r\n\t\tif (data) {\r\n\t\t\tthis.#data.setValue(data);\r\n\t\t}\r\n\t}\r\n\r\n\tgetData() {\r\n\t\treturn this.#data.getValue();\r\n\t}\r\n\r\n\tgetUnique() {\r\n\t\treturn this.getData()?.unique;\r\n\t}\r\n\r\n\tgetEntityType() {\r\n\t\treturn 'issues';\r\n\t}\r\n\r\n\tpublic override destroy(): void {\r\n\t\tthis.#data.destroy();\r\n\t\tsuper.destroy();\r\n\t}\r\n}\r\n\r\nexport { ContentAuditIssuesWorkspaceContext as api };\r\n\r\nexport const CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT = new UmbContextToken<any, ContentAuditIssuesWorkspaceContext>(\r\n\t'UmbWorkspaceContext',\r\n\tundefined,\r\n\t(context): context is ContentAuditIssuesWorkspaceContext => context.getEntityType?.() === 'issues',\r\n);\r\n"],"names":["_workspaceContext","ContentAuditIssuesWorkspaceEditorElement","UmbLitElement","__privateAdd","CONTENT_AUDIT_ISSUES_WORKSPACE_CONTEXT","instance","__privateSet","_a","__privateGet","data","html","CONTENT_AUDIT_ISSUES_ROOT_WORKSPACE_PATH","__decorateClass","state","customElement","UMB_WORKSPACE_PATH_PATTERN","ContentAuditIssuesWorkspaceContext","UmbContextBase","host","_data","CONTENT_AUDIT_ISSUES_WORKSPACE_ALIAS","ContentAuditIssuesDetailRepository","UmbObjectState","UmbWorkspaceRouteManager","_component","info","unique","UmbContextToken","context"],"mappings":";;;;;;;;;;;;;;;;;;;gUAAAA;AAOa,IAAAC,IAAN,cAAuDC,EAAc;AAAA,EAM3E,cAAc;AACP,UAAA,GANPC,EAAA,MAAAH,CAAA,GAQM,KAAA,eAAeI,GAAwC,CAACC,MAAa;;AACzE,MAAAC,EAAA,MAAKN,GAAoBK,CAAA,GAEzB,KAAK,SAAQE,IAAAC,EAAA,MAAKR,CAAmB,MAAxB,gBAAAO,EAAwB,MAAM,CAACE,MAAS;AACpD,aAAK,QAAQA;AAAA,MAAA,CACb;AAAA,IAAA,CACD;AAAA,EAAA;AAAA,EAIO,SAAS;AACjB,QAAI,KAAK;AACD,aAAAC;AAAA,uCAC6BC,CAAwC,uBAAuB,EAAI;AAAA;AAAA,0BAEhF,KAAK,MAAM,IAAI;AAAA;AAAA;AAAA;AAAA,EAIvC;AAEF;AA7BCX,IAAA,oBAAA,QAAA;AAGAY,EAAA;AAAA,EADCC,EAAM;AAAA,GAHKZ,EAIZ,WAAA,SAAA,CAAA;AAJYA,IAANW,EAAA;AAAA,EADNE,EAAc,uCAAuC;AAAA,GACzCb,CAAA;AAkCA,MAAAU,IAA2CI,EAA2B,iBAAiB;AAAA,EACnG,aAAa;AAAA,EACb,YAAY;AACb,CAAC;;AClCM,MAAMC,UAA2CC,EAAe;AAAA,EAYtE,YAAYC,GAAyB;AACpC,UAAMA,GAAMd,CAAsC;AARnD,IAAAD,EAAA,MAAAgB;AAHA,SAAgB,iBAAiBC,GACjB,KAAA,aAAa,IAAIC,EAAmC,IAAI,GAEhEf,EAAA,MAAAa,GAAA,IAAIG,EAAqC,MAAS,IACjD,KAAA,OAAOd,EAAA,MAAKW,GAAM,aAAa,GAExC,KAAS,SAASX,EAAA,MAAKW,GAAM,iBAAiB,CAACV,MAASA,KAAA,gBAAAA,EAAM,MAAM,GAE3D,KAAA,SAAS,IAAIc,EAAyB,IAAI,GAKlD,KAAK,OAAO,UAAU;AAAA,MACrB;AAAA,QACC,MAAM;AAAA,QACN,WAAWtB;AAAA,QACX,OAAO,CAACuB,GAAYC,MAAS;AACtB,gBAAAC,IAASD,EAAK,MAAM,OAAO;AACjC,eAAK,KAAKC,CAAM;AAAA,QAAA;AAAA,MACjB;AAAA,IACD,CACA;AAAA,EAAA;AAAA,EAGF,MAAM,KAAKA,GAAgB;AAC1B,UAAM,EAAE,MAAAjB,EAAK,IAAI,MAAM,KAAK,WAAW,gBAAgBiB,CAAM;AAE7D,IAAIjB,KACED,EAAA,MAAAW,GAAM,SAASV,CAAI;AAAA,EACzB;AAAA,EAGD,UAAU;AACF,WAAAD,EAAA,MAAKW,GAAM,SAAS;AAAA,EAAA;AAAA,EAG5B,YAAY;;AACJ,YAAAZ,IAAA,KAAK,cAAL,gBAAAA,EAAgB;AAAA,EAAA;AAAA,EAGxB,gBAAgB;AACR,WAAA;AAAA,EAAA;AAAA,EAGQ,UAAgB;AAC/B,IAAAC,EAAA,MAAKW,GAAM,QAAQ,GACnB,MAAM,QAAQ;AAAA,EAAA;AAEhB;AA9CCA,IAAA;AAkDM,MAAMf,IAAyC,IAAIuB;AAAA,EACzD;AAAA,EACA;AAAA,EACA,CAACC,MAAA;;AAA2D,aAAArB,IAAAqB,EAAQ,kBAAR,gBAAArB,EAAA,KAAAqB,QAA8B;AAAA;AAC3F;"}