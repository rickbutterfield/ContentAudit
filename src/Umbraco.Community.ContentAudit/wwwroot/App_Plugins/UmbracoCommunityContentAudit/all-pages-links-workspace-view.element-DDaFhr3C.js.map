{"version":3,"file":"all-pages-links-workspace-view.element-DDaFhr3C.js","sources":["../../../../Umbraco.Community.ContentAudit.UI/src/section/all-pages/workspace/all-pages/views/all-pages-links-workspace-view.element.ts"],"sourcesContent":["import { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\nimport { UmbWorkspaceViewElement } from \"@umbraco-cms/backoffice/workspace\";\r\nimport { customElement, state } from \"lit/decorators.js\";\r\nimport { CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT } from \"../all-pages-workspace.context\";\r\nimport { LinkDto, PageAnalysisDto } from \"../../../../../api\";\r\nimport { css, html } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbTextStyles } from \"@umbraco-cms/backoffice/style\";\r\nimport { UmbTableConfig, UmbTableColumn, UmbTableItem } from \"../../../../../interfaces\";\r\n\r\n@customElement('content-audit-all-pages-links-workspace-view')\r\nexport class ContentAuditAllPagesLinksWorkspaceViewElement extends UmbLitElement implements UmbWorkspaceViewElement {\r\n\t@state()\r\n\t_data?: PageAnalysisDto;\r\n\r\n\t#workspaceContext?: typeof CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\t@state()\r\n\tprivate _tableConfig: UmbTableConfig = {\r\n\t\tallowSelection: false,\r\n\t\thideIcon: true\r\n\t};\r\n\r\n\t@state()\r\n\tprivate _tableColumns: Array<UmbTableColumn> = [\r\n\t\t{\r\n\t\t\tname: 'URL',\r\n\t\t\talias: 'url',\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Type',\r\n\t\t\talias: 'type'\r\n\t\t}\r\n\t];\r\n\r\n\t@state()\r\n\tprivate _tableItems: Array<UmbTableItem> = [];\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\t\t\tthis.#observeCollectionItems();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeCollectionItems() {\r\n\t\tif (!this.#workspaceContext) return;\r\n\t\tthis.observe(this.#workspaceContext.data, (data) => {\r\n\t\t\tif (data) {\r\n\t\t\t\tthis._data = data;\r\n\t\t\t\tthis.#createTableItems(this._data.links);\r\n\t\t\t}\r\n\t\t}, 'umbCollectionItemsObserver');\r\n\t}\r\n\r\n\tupdated(changedProperties: Map<string, any>) {\r\n\t\tif (changedProperties.has('data')) {\r\n\t\t\tif (this._data) {\r\n\t\t\t\tif (this._data?.links.length !== 0) {\r\n\t\t\t\t\tthis.#createTableItems(this._data.links);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t#createTableItems(links: LinkDto[]) {\r\n\t\tthis._tableItems = links.map((link) => {\r\n\t\t\treturn {\r\n\t\t\t\tid: link.unique,\r\n\t\t\t\tdata: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'url',\r\n\t\t\t\t\t\tvalue: link.url\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'type',\r\n\t\t\t\t\t\tvalue: html`${link.isExternal ? 'External' : 'Internal'}`\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._data) return html`<uui-box>No data available</uui-box>`;\r\n\t\tif (!this._data.links) return html`<uui-box>No link data available</uui-box>`;\r\n\t\tif (this._data.links.length == 0) return html`<uui-box>No links to report for this page</uui-box>`;\r\n\r\n\t\treturn html`\r\n\t\t\t<umb-table\r\n\t\t\t\t.config=${this._tableConfig}\r\n\t\t\t\t.columns=${this._tableColumns}\r\n\t\t\t\t.items=${this._tableItems}\r\n\t\t\t></umb-table>\r\n\t\t`;\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tpadding: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\t\t`\r\n\t]\r\n}\r\n\r\nexport default ContentAuditAllPagesLinksWorkspaceViewElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'content-audit-all-pages-links-workspace-view': ContentAuditAllPagesLinksWorkspaceViewElement;\r\n\t}\r\n}\r\n"],"names":["_workspaceContext","_ContentAuditAllPagesLinksWorkspaceViewElement_instances","observeCollectionItems_fn","createTableItems_fn","ContentAuditAllPagesLinksWorkspaceViewElement","UmbLitElement","__privateAdd","CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT","instance","__privateSet","__privateMethod","changedProperties","_a","html","__privateGet","data","links","link","UmbTextStyles","css","__decorateClass","state","customElement","ContentAuditAllPagesLinksWorkspaceViewElement$1"],"mappings":";;;;;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC;AAUa,IAAAC,IAAN,cAA4DC,EAAiD;AAAA,EA2BnH,cAAc;AACP,UAAA,GA5BDC,EAAA,MAAAL,CAAA,GAINK,EAAA,MAAAN,CAAA,GAGA,KAAQ,eAA+B;AAAA,MACtC,gBAAgB;AAAA,MAChB,UAAU;AAAA,IACX,GAGA,KAAQ,gBAAuC;AAAA,MAC9C;AAAA,QACC,MAAM;AAAA,QACN,OAAO;AAAA,MACR;AAAA,MACA;AAAA,QACC,MAAM;AAAA,QACN,OAAO;AAAA,MAAA;AAAA,IAET,GAGA,KAAQ,cAAmC,CAAC,GAKtC,KAAA,eAAeO,GAA2C,CAACC,MAAa;AAC5E,MAAAC,EAAA,MAAKT,GAAoBQ,CAAA,GACzBE,EAAA,MAAKT,GAALC,CAAA,EAAA,KAAA,IAAA;AAAA,IAAA,CACA;AAAA,EAAA;AAAA,EAaF,QAAQS,GAAqC;;AACxC,IAAAA,EAAkB,IAAI,MAAM,KAC3B,KAAK,WACJC,IAAA,KAAK,UAAL,gBAAAA,EAAY,MAAM,YAAW,KAC3BF,EAAA,MAAAT,GAAAE,CAAA,EAAL,KAAuB,MAAA,KAAK,MAAM,KAAA;AAAA,EAGrC;AAAA,EAqBQ,SAAS;AACb,WAAC,KAAK,QACL,KAAK,MAAM,QACZ,KAAK,MAAM,MAAM,UAAU,IAAUU,yDAElCA;AAAA;AAAA,cAEK,KAAK,YAAY;AAAA,eAChB,KAAK,aAAa;AAAA,aACpB,KAAK,WAAW;AAAA;AAAA,MAPGA,+CADNA;AAAA,EAQG;AAc7B;AA7FCb,IAAA,oBAAA,QAAA;AAJMC,IAAA,oBAAA,QAAA;AAoCNC,IAAuB,WAAG;AACrB,EAACY,QAAKd,CAAmB,KAC7B,KAAK,QAAQc,EAAA,MAAKd,CAAkB,EAAA,MAAM,CAACe,MAAS;AACnD,IAAIA,MACH,KAAK,QAAQA,GACRL,EAAA,MAAAT,GAAAE,CAAA,EAAL,KAAuB,MAAA,KAAK,MAAM,KAAA;AAAA,KAEjC,4BAA4B;AAChC;AAYAA,IAAiB,SAACa,GAAkB;AACnC,OAAK,cAAcA,EAAM,IAAI,CAACC,OACtB;AAAA,IACN,IAAIA,EAAK;AAAA,IACT,MAAM;AAAA,MACL;AAAA,QACC,aAAa;AAAA,QACb,OAAOA,EAAK;AAAA,MACb;AAAA,MACA;AAAA,QACC,aAAa;AAAA,QACb,OAAOJ,IAAOI,EAAK,aAAa,aAAa,UAAU;AAAA,MAAA;AAAA,IACxD;AAAA,EAEF,EACA;AACF;AAxEYb,EAwFI,SAAS;AAAA,EACxBc;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAMD;AA9FAC,EAAA;AAAA,EADCC,EAAM;AAAA,GADKjB,EAEZ,WAAA,SAAA,CAAA;AAKQgB,EAAA;AAAA,EADPC,EAAM;AAAA,GANKjB,EAOJ,WAAA,gBAAA,CAAA;AAMAgB,EAAA;AAAA,EADPC,EAAM;AAAA,GAZKjB,EAaJ,WAAA,iBAAA,CAAA;AAYAgB,EAAA;AAAA,EADPC,EAAM;AAAA,GAxBKjB,EAyBJ,WAAA,eAAA,CAAA;AAzBIA,IAANgB,EAAA;AAAA,EADNE,EAAc,8CAA8C;AAAA,GAChDlB,CAAA;AAmGb,MAAAmB,IAAenB;"}