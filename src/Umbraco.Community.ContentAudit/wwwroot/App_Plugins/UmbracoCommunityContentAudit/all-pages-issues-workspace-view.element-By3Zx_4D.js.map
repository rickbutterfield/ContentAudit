{"version":3,"file":"all-pages-issues-workspace-view.element-By3Zx_4D.js","sources":["../../../../Umbraco.Community.ContentAudit.UI/src/section/all-pages/workspace/all-pages/views/all-pages-issues-workspace-view.element.ts"],"sourcesContent":["import { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\nimport { UmbWorkspaceViewElement } from \"@umbraco-cms/backoffice/workspace\";\r\nimport { customElement, state } from \"lit/decorators.js\";\r\nimport { CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT } from \"../all-pages-workspace.context\";\r\nimport { IssueDto, PageAnalysisDto } from \"../../../../../api\";\r\nimport { css, html } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbTextStyles } from \"@umbraco-cms/backoffice/style\";\r\nimport { UmbTableConfig, UmbTableColumn, UmbTableItem } from \"../../../../../interfaces\";\r\n\r\n@customElement('content-audit-all-pages-issues-workspace-view')\r\nexport class ContentAuditAllPagesIssuesWorkspaceViewElement extends UmbLitElement implements UmbWorkspaceViewElement {\r\n\t@state()\r\n\t_data?: PageAnalysisDto;\r\n\r\n\t#workspaceContext?: typeof CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\t@state()\r\n\tprivate _tableConfig: UmbTableConfig = {\r\n\t\tallowSelection: false,\r\n\t\thideIcon: true\r\n\t};\r\n\r\n\t@state()\r\n\tprivate _tableColumns: Array<UmbTableColumn> = [\r\n\t\t{\r\n\t\t\tname: 'Issue',\r\n\t\t\talias: 'name',\r\n\t\t\telementName: 'content-audit-issues-table-name-column-layout'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Type',\r\n\t\t\talias: 'type'\r\n\t\t},\r\n\t\t{\r\n\t\t\tname: 'Priority',\r\n\t\t\talias: 'priority'\r\n\t\t}\r\n\t];\r\n\r\n\t@state()\r\n\tprivate _tableItems: Array<UmbTableItem> = [];\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\t\t\tthis.#observeCollectionItems();\r\n\t\t});\r\n\t}\r\n\r\n\t#observeCollectionItems() {\r\n\t\tif (!this.#workspaceContext) return;\r\n\t\tthis.observe(this.#workspaceContext.data, (data) => {\r\n\t\t\tif (data) {\r\n\t\t\t\tthis._data = data;\r\n\t\t\t\tthis.#createTableItems(this._data.issues);\r\n\t\t\t}\r\n\t\t}, 'umbCollectionItemsObserver');\r\n\t}\r\n\r\n\tupdated(changedProperties: Map<string, any>) {\r\n\t\tif (changedProperties.has('data')) {\r\n\t\t\tif (this._data) {\r\n\t\t\t\tif (this._data?.issues.length !== 0) {\r\n\t\t\t\t\tthis.#createTableItems(this._data.issues);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t#createTableItems(issues: IssueDto[]) {\r\n\t\tthis._tableItems = issues.map((issue) => {\r\n\t\t\treturn {\r\n\t\t\t\tid: issue.unique,\r\n\t\t\t\tentityType: 'issue-type',\r\n\t\t\t\ticon: 'icon-alert',\r\n\t\t\t\tdata: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'name',\r\n\t\t\t\t\t\tvalue: {\r\n\t\t\t\t\t\t\tunique: issue.unique,\r\n\t\t\t\t\t\t\tname: issue.name,\r\n\t\t\t\t\t\t\tcategory: issue.category,\r\n\t\t\t\t\t\t\tdescription: issue.description\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'type',\r\n\t\t\t\t\t\tvalue: html`<content-audit-issue-type-label .type=${issue.type}></content-audit-issue-type-label`\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcolumnAlias: 'priority',\r\n\t\t\t\t\t\tvalue: html`<content-audit-priority-type-label .type=${issue.priority}></content-audit-priority-type-label>`\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\toverride render() {\r\n\t\tif (!this._data) return html`<uui-box>No data available</uui-box>`;\r\n\t\tif (!this._data.issues) return html`<uui-box>No issue data available</uui-box>`;\r\n\t\tif (this._data.issues.length == 0) return html`<uui-box>No issues to report for this page</uui-box>`;\r\n\r\n\t\tif (this._tableItems.length !== 0) {\r\n\t\t\treturn html`\r\n\t\t\t\t<umb-table\r\n\t\t\t\t\t.config=${this._tableConfig}\r\n\t\t\t\t\t.columns=${this._tableColumns}\r\n\t\t\t\t\t.items=${this._tableItems}\r\n\t\t\t\t></umb-table>\r\n\t\t\t`;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\tpadding: var(--uui-size-layout-1);\r\n\t\t\t}\r\n\t\t`\r\n\t]\r\n}\r\n\r\nexport default ContentAuditAllPagesIssuesWorkspaceViewElement;\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'content-audit-all-pages-issues-workspace-view': ContentAuditAllPagesIssuesWorkspaceViewElement;\r\n\t}\r\n}\r\n"],"names":["_workspaceContext","_ContentAuditAllPagesIssuesWorkspaceViewElement_instances","observeCollectionItems_fn","createTableItems_fn","ContentAuditAllPagesIssuesWorkspaceViewElement","UmbLitElement","__privateAdd","CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT","instance","__privateSet","__privateMethod","changedProperties","_a","html","__privateGet","data","issues","issue","UmbTextStyles","css","__decorateClass","state","customElement","ContentAuditAllPagesIssuesWorkspaceViewElement$1"],"mappings":"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"}