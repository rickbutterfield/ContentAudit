{"version":3,"file":"all-pages-workspace.context-BjfuJVn6.js","sources":["../../../../Umbraco.Community.ContentAudit.UI/src/section/all-pages/workspace/all-pages/all-pages-workspace-editor.element.ts","../../../../Umbraco.Community.ContentAudit.UI/src/section/all-pages/workspace/all-pages/all-pages-workspace.context.ts"],"sourcesContent":["import { css, customElement, html, state } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\nimport { CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT } from \"./all-pages-workspace.context\";\r\nimport { UMB_WORKSPACE_PATH_PATTERN } from \"@umbraco-cms/backoffice/workspace\";\r\nimport { PageAnalysisDto } from \"../../../../api\";\r\nimport { UmbTextStyles } from \"@umbraco-cms/backoffice/style\";\r\n\r\n@customElement('content-audit-all-pages-workspace-editor')\r\nexport class ContentAuditAllPagesWorkspaceEditorElement extends UmbLitElement {\r\n\t#workspaceContext?: typeof CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT.TYPE;\r\n\r\n\t@state()\r\n\t_data?: PageAnalysisDto;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.consumeContext(CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT, (instance) => {\r\n\t\t\tthis.#workspaceContext = instance;\r\n\r\n\t\t\tthis.observe(this.#workspaceContext.data, (data) => {\r\n\t\t\t\tthis._data = data;\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\r\n\toverride render() {\r\n\t\tif (this._data) {\r\n\t\t\treturn html`\r\n\t\t\t\t<umb-workspace-editor back-path=\"${CONTENT_AUDIT_ALL_PAGES_ROOT_WORKSPACE_PATH}\" .enforceNoFooter=\"${true}\">\r\n\t\t\t\t\t<div slot=\"header\">\r\n\t\t\t\t\t\t<h3 id=\"headline\">${this._data.pageData?.url}</h3>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<slot></slot>\r\n\t\t\t\t</umb-workspace-editor>\r\n\t\t\t`;\r\n\t\t}\r\n\t}\r\n\r\n\tstatic override styles = [\r\n\t\tUmbTextStyles,\r\n\t\tcss`\r\n\t\t\t:host {\r\n\t\t\t\t//padding: \r\n\t\t\t}\r\n\t\t`\r\n\t]\r\n}\r\n\r\nexport default ContentAuditAllPagesWorkspaceEditorElement;\r\n\r\nexport const CONTENT_AUDIT_ALL_PAGES_ROOT_WORKSPACE_PATH = UMB_WORKSPACE_PATH_PATTERN.generateAbsolute({\r\n\tsectionName: 'audit',\r\n\tentityType: 'all-pages-root',\r\n});\r\n\r\n\r\ndeclare global {\r\n\tinterface HTMLElementTagNameMap {\r\n\t\t'content-audit-all-pages-workspace-editor': ContentAuditAllPagesWorkspaceEditorElement;\r\n\t}\r\n}\r\n","import { UmbContextBase } from \"@umbraco-cms/backoffice/class-api\";\r\nimport { UmbContextToken } from \"@umbraco-cms/backoffice/context-api\";\r\nimport { UmbControllerHost } from \"@umbraco-cms/backoffice/controller-api\";\r\nimport { UmbWorkspaceRouteManager } from \"@umbraco-cms/backoffice/workspace\";\r\nimport ContentAuditAllPagesWorkspaceEditorElement from \"./all-pages-workspace-editor.element\";\r\nimport ContentAuditAllPagesDetailRepository from \"../../repository/detail/all-pages-detail.repository\";\r\nimport { UmbObjectState } from \"@umbraco-cms/backoffice/observable-api\";\r\nimport { PageAnalysisDto } from \"../../../../api\";\r\nimport { CONTENT_AUDIT_ALL_PAGES_WORKSPACE_ALIAS } from \"../constants\";\r\n\r\nexport class ContentAuditAllPagesWorkspaceContext\r\n\textends UmbContextBase<ContentAuditAllPagesWorkspaceContext> {\r\n\r\n\tpublic readonly workspaceAlias = CONTENT_AUDIT_ALL_PAGES_WORKSPACE_ALIAS;\r\n\tpublic readonly repository = new ContentAuditAllPagesDetailRepository(this);\r\n\r\n\t#data = new UmbObjectState<PageAnalysisDto | undefined>(undefined);\r\n\treadonly data = this.#data.asObservable();\r\n\r\n\treadonly unique = this.#data.asObservablePart((data) => data?.unique);\r\n\r\n\treadonly routes = new UmbWorkspaceRouteManager(this);\r\n\r\n\tconstructor(host: UmbControllerHost) {\r\n\t\tsuper(host, CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT);\r\n\t\tthis.routes.setRoutes([\r\n\t\t\t{\r\n\t\t\t\tpath: 'edit/:unique',\r\n\t\t\t\tcomponent: ContentAuditAllPagesWorkspaceEditorElement,\r\n\t\t\t\tsetup: (_component, info) => {\r\n\t\t\t\t\tconst unique = info.match.params.unique;\r\n\t\t\t\t\tthis.load(unique);\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t]);\r\n\t}\r\n\r\n\tasync load(unique: string) {\r\n\t\tconst { data } = await this.repository.requestByUnique(unique);\r\n\r\n\t\tif (data) {\r\n\t\t\tthis.#data.setValue(data);\r\n\t\t}\r\n\t}\r\n\r\n\tgetData() {\r\n\t\treturn this.#data.getValue();\r\n\t}\r\n\r\n\tgetUnique() {\r\n\t\treturn this.getData()?.unique;\r\n\t}\r\n\r\n\tgetEntityType() {\r\n\t\treturn 'all-pages';\r\n\t}\r\n\r\n\tpublic override destroy(): void {\r\n\t\tthis.#data.destroy();\r\n\t\tsuper.destroy();\r\n\t}\r\n}\r\n\r\nexport { ContentAuditAllPagesWorkspaceContext as api };\r\n\r\nexport const CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT = new UmbContextToken<any, ContentAuditAllPagesWorkspaceContext>(\r\n\t'UmbWorkspaceContext',\r\n\tundefined,\r\n\t(context): context is ContentAuditAllPagesWorkspaceContext => context.getEntityType?.() === 'all-pages',\r\n);\r\n"],"names":["_workspaceContext","ContentAuditAllPagesWorkspaceEditorElement","UmbLitElement","__privateAdd","CONTENT_AUDIT_ALL_PAGES_WORKSPACE_CONTEXT","instance","__privateSet","__privateGet","data","html","CONTENT_AUDIT_ALL_PAGES_ROOT_WORKSPACE_PATH","_a","UmbTextStyles","css","__decorateClass","state","customElement","UMB_WORKSPACE_PATH_PATTERN","ContentAuditAllPagesWorkspaceContext","UmbContextBase","host","_data","CONTENT_AUDIT_ALL_PAGES_WORKSPACE_ALIAS","ContentAuditAllPagesDetailRepository","UmbObjectState","UmbWorkspaceRouteManager","_component","info","unique","UmbContextToken","context"],"mappings":";;;;;;;;;;;;;;;;;;;;gVAAAA;AAQa,IAAAC,IAAN,cAAyDC,EAAc;AAAA,EAM7E,cAAc;AACP,UAAA,GANPC,EAAA,MAAAH,CAAA,GAQM,KAAA,eAAeI,GAA2C,CAACC,MAAa;AAC5E,MAAAC,EAAA,MAAKN,GAAoBK,CAAA,GAEzB,KAAK,QAAQE,EAAA,MAAKP,CAAkB,EAAA,MAAM,CAACQ,MAAS;AACnD,aAAK,QAAQA;AAAA,MAAA,CACb;AAAA,IAAA,CACD;AAAA,EAAA;AAAA,EAIO,SAAS;;AACjB,QAAI,KAAK;AACD,aAAAC;AAAA,uCAC6BC,CAA2C,uBAAuB,EAAI;AAAA;AAAA,2BAEnFC,IAAA,KAAK,MAAM,aAAX,gBAAAA,EAAqB,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA,EAKhD;AAWF;AAvCCX,IAAA,oBAAA,QAAA;AADYC,EAgCI,SAAS;AAAA,EACxBW;AAAA,EACAC;AAAA;AAAA;AAAA;AAAA;AAKD;AAnCAC,EAAA;AAAA,EADCC,EAAM;AAAA,GAHKd,EAIZ,WAAA,SAAA,CAAA;AAJYA,IAANa,EAAA;AAAA,EADNE,EAAc,0CAA0C;AAAA,GAC5Cf,CAAA;AA4CA,MAAAS,IAA8CO,EAA2B,iBAAiB;AAAA,EACtG,aAAa;AAAA,EACb,YAAY;AACb,CAAC;;AC7CM,MAAMC,UACJC,EAAqD;AAAA,EAY7D,YAAYC,GAAyB;AACpC,UAAMA,GAAMhB,CAAyC;AARtD,IAAAD,EAAA,MAAAkB;AAHA,SAAgB,iBAAiBC,GACjB,KAAA,aAAa,IAAIC,EAAqC,IAAI,GAElEjB,EAAA,MAAAe,GAAA,IAAIG,EAA4C,MAAS,IACxD,KAAA,OAAOjB,EAAA,MAAKc,GAAM,aAAa,GAExC,KAAS,SAASd,EAAA,MAAKc,GAAM,iBAAiB,CAACb,MAASA,KAAA,gBAAAA,EAAM,MAAM,GAE3D,KAAA,SAAS,IAAIiB,EAAyB,IAAI,GAIlD,KAAK,OAAO,UAAU;AAAA,MACrB;AAAA,QACC,MAAM;AAAA,QACN,WAAWxB;AAAA,QACX,OAAO,CAACyB,GAAYC,MAAS;AACtB,gBAAAC,IAASD,EAAK,MAAM,OAAO;AACjC,eAAK,KAAKC,CAAM;AAAA,QAAA;AAAA,MACjB;AAAA,IACD,CACA;AAAA,EAAA;AAAA,EAGF,MAAM,KAAKA,GAAgB;AAC1B,UAAM,EAAE,MAAApB,EAAK,IAAI,MAAM,KAAK,WAAW,gBAAgBoB,CAAM;AAE7D,IAAIpB,KACED,EAAA,MAAAc,GAAM,SAASb,CAAI;AAAA,EACzB;AAAA,EAGD,UAAU;AACF,WAAAD,EAAA,MAAKc,GAAM,SAAS;AAAA,EAAA;AAAA,EAG5B,YAAY;;AACJ,YAAAV,IAAA,KAAK,cAAL,gBAAAA,EAAgB;AAAA,EAAA;AAAA,EAGxB,gBAAgB;AACR,WAAA;AAAA,EAAA;AAAA,EAGQ,UAAgB;AAC/B,IAAAJ,EAAA,MAAKc,GAAM,QAAQ,GACnB,MAAM,QAAQ;AAAA,EAAA;AAEhB;AA7CCA,IAAA;AAiDM,MAAMjB,IAA4C,IAAIyB;AAAA,EAC5D;AAAA,EACA;AAAA,EACA,CAACC,MAAA;;AAA6D,aAAAnB,IAAAmB,EAAQ,kBAAR,gBAAAnB,EAAA,KAAAmB,QAA8B;AAAA;AAC7F;"}